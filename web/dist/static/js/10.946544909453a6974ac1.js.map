{"version":3,"sources":["webpack:///src/pages/capabilities.vue","webpack:///./src/pages/capabilities.vue?7488","webpack:///./src/pages/capabilities.vue"],"names":["capabilities","data","blueEnable","isBleScan","locationGranted","locationEnabled","deviceName","networkKey","flag","oobMethods","deviceId","proxyAddress","connectContent","connectData","capabilitiesTimeOut","created","self","this","window","res","scanCallback","provisioningCallback","connectCallback","onBackPressed","methods","extends_default","Object","vuex_esm","setNum","getOobMethods","item","constant_default","a","NO_OOB_AUTHENTICATION","STATIC_OOB_AUTHENTICATION","OUTPUT_OOB_AUTHENTICATION","INPUT_OOB_AUTHENTICATION","provision","provisionData","name","oobMethod","console","log","stringify_default","mint_ui_common","open","setTimeout","close","messageRemind","$t","EspBleMesh","startProvisioning","deviceProvision","utils","_isEmpty","length","showBlueFail","hide","disconnect","$router","goBack","deviceNameClick","prompt","inputValue","inputPlaceholder","inputValidator","v","stringToBytes","inputErrorMessage","confirmButtonText","cancelButtonText","then","obj","value","catch","err","networkKeyClick","homeDeviceScan","startScan","type","msg","message","position","base64","decode","JSON","parse","stopScan","i","address","id","$store","commit","connect","sort","sortBy","status","STATUS_GATT_CONNECTED","STATUS_GATT_DISCONNECTED","STATUS_PROXY_READY","STATUS_PROVISIONING_COMPLETE","clearTimeout","node","$type","title","showConfirmButton","closeOnClickModal","showCancelButton","action","removeDevices","backHome","STATUS_FAILED","scanDeviceList","state","scanProvisioning","forEach","splice","goRight","query","CAPABILITIES","mounted","$route","computed","number","home","getBlueEnable","blueInfo","pages_capabilities","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","_s","directives","rawName","expression","$event","_l","stopPropagation","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.946544909453a6974ac1.js","sourcesContent":["<template>\n  <div class=\"content-box\">\n    <div class=\"title-info\">\n      <h4 class=\"app-title\"><span @click=\"hide\"><i class=\"icon-left back\"></i></span>{{$t('capabilities')}}</h4>\n      <div v-show=\"!getBlueEnable\"  @click=\"showBlueFail\" class=\"bluetooth-second-base\">\n        <i class=\"icon-bluetooth bluetooth-second-style\"></i>\n      </div>\n      <span @click=\"deviceProvision()\" class=\"right-top-text\">{{$t('provision')}}</span>\n      <ul v-show=\"flag\" class=\"add-ul add-provision-ul\">\n        <!--        <i class=\"icon-light\"></i>-->\n        <li v-for=\"(item, i) in oobMethods\" @click.stop=\"provision(i)\"><span>{{getOobMethods(item)}}</span></li>\n<!--        <li @click.stop=\"provision('2')\"><span>{{$t('fastprovision')}}</span></li>-->\n      </ul>\n    </div>\n    <div class=\"device-detail\">\n      <!--        设备名称-->\n      <div @click=\"deviceNameClick\" class=\"item\">\n        <span class=\"name\">{{$t('devicename')}}</span>\n        <span class=\"content\">{{deviceName}}</span>\n        <i class=\"icon-right text-color\"></i>\n      </div>\n      <!--        Network Key-->\n      <div @click=\"networkKeyClick\" class=\"item\">\n        <span class=\"name\">{{$t('networkkey')}}</span>\n        <span class=\"content\">{{networkKey}}</span>\n<!--        <i class=\"icon-right text-color\"></i>-->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {mapMutations, mapGetters, mapState} from 'vuex'\n  import {MessageBox, Toast, Indicator} from 'mint-ui'\n  import Util from '../assets/tool/utils'\n  import Constant from '../assets/tool/constant'\n  export default {\n    data () {\n      return {\n        blueEnable: false,\n        isBleScan: true,\n        locationGranted: true,\n        locationEnabled: true,\n        deviceName: '',\n        networkKey: 'Primary Network Key',\n        flag: false,\n        oobMethods: [],\n        deviceId: '',\n        proxyAddress: '',\n        connectContent: 0,\n        connectData: '',\n        capabilitiesTimeOut: ''\n      }\n    },\n    created: function () {\n      const self = this\n      window['scanCallback'] = (res) => {\n        self.scanCallback(res)\n      }\n      window['provisioningCallback'] = (res) => {\n        self.provisioningCallback(res)\n      }\n      window['connectCallback'] = (res) => {\n        self.connectCallback(res)\n      }\n      window['onBackPressed'] = () => {\n        self.onBackPressed()\n      }\n    },\n    methods: {\n      ...mapMutations({\n        setNum: 'SET_NUM'\n      }),\n      getOobMethods (item) {\n        if (item === Constant.NO_OOB_AUTHENTICATION) {\n          return 'No OOB'\n        } else if (item === Constant.STATIC_OOB_AUTHENTICATION) {\n          return 'Static OOB'\n        } else if (item === Constant.OUTPUT_OOB_AUTHENTICATION) {\n          return 'Output OOB'\n        } else if (item === Constant.INPUT_OOB_AUTHENTICATION) {\n          return 'Input OOB'\n        }\n      },\n      provision (item) {\n        var self = this\n        self.flag = false\n        var provisionData = {'name': self.deviceName, 'oobMethod': self.oobMethods[item]}\n        console.log('选择配网类型： ' + item + '配网参数： ' + JSON.stringify(provisionData))\n        Indicator.open()\n        self.capabilitiesTimeOut = setTimeout(function () {\n          Indicator.close()\n          self.messageRemind(self.$t('provisionTimeout'))\n        }, 6000)\n        EspBleMesh.startProvisioning(JSON.stringify(provisionData))\n      },\n      deviceProvision () {\n        var self = this\n        console.log('blueEnable:' + this.blueEnable + '  locationEnabled:' + this.locationEnabled + '  locationGranted:' + this.locationGranted)\n        if (!self.blueEnable) {\n          self.messageRemind(self.$t('notbluetooth'))\n          return\n        }\n        if (!self.locationEnabled) {\n          self.messageRemind(self.$t('notlocation'))\n          return\n        }\n        if (!self.locationGranted) {\n          self.messageRemind(self.$t('notgps'))\n          return\n        }\n        if (Util._isEmpty(self.oobMethods)){\n          return\n        }\n        if (self.oobMethods.length === 1) {\n          console.log('选择配网类型' + self.oobMethods[0])\n          self.provision(0)\n        }else {\n          self.flag = true\n        }\n      },\n      showBlueFail () {\n        console.log('点击蓝牙按钮')\n      },\n      hide () {\n        EspBleMesh.disconnect()\n        this.flag = false\n        this.$router.goBack()\n      },\n      deviceNameClick () {\n        var self = this\n        console.log('点击编辑设备名称')\n        MessageBox.prompt(self.$t('devicename'), {inputValue: self.deviceName, inputPlaceholder: self.$t('devicename'),\n            inputValidator:function(v){if (Util.stringToBytes(v).length > 32){return false} {}},\n            inputErrorMessage: self.$t('longDesc'),\n            confirmButtonText: self.$t('confirmBtn'), cancelButtonText: self.$t('cancelBtn')}).then(function(obj) {\n              self.deviceName = obj.value;\n        }).catch(function(err) {\n          // self.onBackIndex();\n        });\n      },\n      networkKeyClick () {\n        console.log('点击选择密钥')\n      },\n      onBackPressed () {\n        EspBleMesh.disconnect()\n        this.flag = false\n        this.$router.goBack()\n      },\n      homeDeviceScan () {\n        var self = this\n        console.log('homeDeviceScan 123')\n        if (!self.blueEnable) {\n          self.messageRemind(self.$t('notbluetooth'))\n        }\n        if (!self.locationEnabled) {\n          self.messageRemind(self.$t('notlocation'))\n        }\n        if (!self.locationGranted) {\n          self.messageRemind(self.$t('notgps'))\n        }\n        if (self.blueEnable && self.locationEnabled && self.locationGranted) {\n          console.log('home 开始 proxy 蓝牙扫描')\n          var scanData = {'type':'proxy'}\n          EspBleMesh.startScan(JSON.stringify(scanData))\n        }\n      },\n      messageRemind (msg) {\n        Toast({\n          message: msg,\n          position: 'bottom'\n        })\n      },\n      scanCallback (res) {\n        var self = this\n        res = Util.base64().decode(res)\n        console.log('Home scan proxy device: ' + res)\n        res = JSON.parse(res)\n        if (!Util._isEmpty(res)) {\n          EspBleMesh.stopScan()\n          for (let i = 0; i < res.length; ++i) {\n            if (res[i].address === self.proxyAddress) {\n              self.connectData = {'id': res[i].id, 'type': 'proxy', 'address': self.proxyAddress}\n              console.log('FBY home connectData: ' + JSON.stringify(self.connectData))\n              self.$store.commit('setBleConnectAddress', self.proxyAddress)\n              EspBleMesh.connect(JSON.stringify(self.connectData))\n              return\n            }\n          }\n          res.sort(Util.sortBy(\"rssi\"));\n          self.connectData = {'id': res[0].id, 'type': 'proxy', 'address': self.proxyAddress}\n          console.log('FBY home connectData: ' + JSON.stringify(self.connectData))\n          self.$store.commit('setBleConnectAddress', self.proxyAddress)\n          EspBleMesh.connect(JSON.stringify(self.connectData))\n        }\n      },\n      connectCallback (res) {\n        var self = this\n        res = Util.base64().decode(res)\n        console.log('FBY connectCallback' + res)\n        res = JSON.parse(res)\n        if (!Util._isEmpty(res)) {\n          switch(res.status) {\n            case Constant.STATUS_GATT_CONNECTED:\n              console.log('设备蓝牙连接成功 12345678900987654321')\n              self.$store.commit('setIsBleConnect', true)\n              self.connectContent = 0\n              break\n            case Constant.STATUS_GATT_DISCONNECTED:\n              if (self.connectContent < 2) {\n                if (!Util._isEmpty(self.connectData)) {\n                  EspBleMesh.connect(JSON.stringify(self.connectData))\n                }\n              }\n              self.connectContent ++\n              break\n            case Constant.STATUS_PROXY_READY:\n              console.log('设备详情获取成功：' + res)\n              self.connectContent = 0\n              break\n          }\n        }\n      },\n      provisioningCallback (res) {\n        var self = this\n        res = Util.base64().decode(res)\n        console.log('FBY provisioningCallback' + res)\n        res = JSON.parse(res)\n        if (!Util._isEmpty(res)) {\n          if (res.status === Constant.STATUS_PROVISIONING_COMPLETE) {\n            clearTimeout(self.capabilitiesTimeOut)\n            self.$store.commit('setSigProvisionList', res.node)\n            self.proxyAddress = res.node.address\n            self.homeDeviceScan()\n            setTimeout(function () {\n              Indicator.close()\n              MessageBox({\n                $type: 'alert',\n                title: self.$t('success'),\n                message: self.$t('provisioningcomplete'),\n                showConfirmButton: false,\n                closeOnClickModal: false,\n                showCancelButton: true,\n                cancelButtonText: self.$t('confirmBtn')\n              }).then(action => {\n                console.log('点击确定按钮')\n                self.removeDevices()\n                self.backHome(res.node)\n              })\n            }, 2000)\n          } else if (res.status === Constant.STATUS_FAILED) {\n            console.log('capabilities STATUS_FAILED')\n          }\n        }\n      },\n      removeDevices () {\n        var self = this\n        var scanDeviceList = self.$store.state.scanProvisioning\n        scanDeviceList.forEach(function (item, i) {\n          if (item.id === self.deviceId) {\n            scanDeviceList.splice(i, 1);\n            return false;\n          }\n        })\n        self.$store.commit('setScanProvisioning', scanDeviceList)\n      },\n      backHome (node) {\n        var self = this\n        self.$router.goRight({\n          name: 'home',\n          query: {\n            node: node,\n            type: Constant.CAPABILITIES\n          }\n        })\n      }\n    },\n    mounted () {\n      this.connectContent = 0\n      console.log('sigprovision 传参打印' + JSON.stringify(this.$route.query))\n      this.deviceName = this.$route.query.name\n      this.oobMethods = this.$route.query.oobMethods\n      this.deviceId = this.$route.query.deviceId\n    },\n    computed: {\n      ...mapGetters([\n        'number'\n      ]),\n      ...mapState({\n        number: state => state.home.number\n      }),\n      getBlueEnable () {\n        this.blueEnable = this.$store.state.blueInfo\n        this.locationGranted = this.$store.state.locationGranted\n        this.locationEnabled = this.$store.state.locationEnabled\n        return this.blueEnable\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"less\">\n  @import '../assets/css/index.less';\n  .device-detail {\n     margin: 70px 30px;\n     border: 1px solid @tab-general-bg-color;\n   }\n  .device-detail .item {\n    display: flex;\n    height: 45px;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 10px;\n  }\n  .device-detail .name {\n    flex: 1;\n  }\n  .device-detail .content {\n    color: @Secondary-font-color;\n    margin-right: 10px;\n  }\n  .text-color {\n    color: @Secondary-font-color;\n    font-size: 12px;\n  }\n  .add-provision-ul {\n    top: 50px !important;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/capabilities.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-box\"},[_c('div',{staticClass:\"title-info\"},[_c('h4',{staticClass:\"app-title\"},[_c('span',{on:{\"click\":_vm.hide}},[_c('i',{staticClass:\"icon-left back\"})]),_vm._v(_vm._s(_vm.$t('capabilities')))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.getBlueEnable),expression:\"!getBlueEnable\"}],staticClass:\"bluetooth-second-base\",on:{\"click\":_vm.showBlueFail}},[_c('i',{staticClass:\"icon-bluetooth bluetooth-second-style\"})]),_vm._v(\" \"),_c('span',{staticClass:\"right-top-text\",on:{\"click\":function($event){return _vm.deviceProvision()}}},[_vm._v(_vm._s(_vm.$t('provision')))]),_vm._v(\" \"),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.flag),expression:\"flag\"}],staticClass:\"add-ul add-provision-ul\"},_vm._l((_vm.oobMethods),function(item,i){return _c('li',{on:{\"click\":function($event){$event.stopPropagation();return _vm.provision(i)}}},[_c('span',[_vm._v(_vm._s(_vm.getOobMethods(item)))])])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"device-detail\"},[_c('div',{staticClass:\"item\",on:{\"click\":_vm.deviceNameClick}},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.$t('devicename')))]),_vm._v(\" \"),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.deviceName))]),_vm._v(\" \"),_c('i',{staticClass:\"icon-right text-color\"})]),_vm._v(\" \"),_c('div',{staticClass:\"item\",on:{\"click\":_vm.networkKeyClick}},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.$t('networkkey')))]),_vm._v(\" \"),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.networkKey))])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-499a310f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/capabilities.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-499a310f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./capabilities.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./capabilities.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./capabilities.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-499a310f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./capabilities.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-499a310f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/capabilities.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}