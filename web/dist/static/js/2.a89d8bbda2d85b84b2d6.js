webpackJsonp([2,7],{"+tPU":function(e,t,s){s("xGkn");for(var o=s("7KvD"),n=s("hJx8"),i=s("/bQp"),a=s("dSzd")("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<c.length;l++){var r=c[l],u=o[r],d=u&&u.prototype;d&&!d[a]&&n(d,a,r),i[r]=i.Array}},"/bQp":function(e,t){e.exports={}},"2u8J":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("BO1k"),n=s.n(o),i=s("mvHQ"),a=s.n(i),c=s("Dd8w"),l=s.n(c),r=s("NYxO"),u=s("Y54T"),d=s("Au9i"),h=s("yojn"),m=s.n(h),p=(s("gpVb"),{data:function(){return{blueEnable:!0,locationGranted:!0,locationEnabled:!0,selected:0,selectList:[],skillsGroupOne:[],isBleConnect:!1,connectContent:0,connectData:"",homedeviceGroup:this.$store.state.deviceGroupList,groupName:"",groupDetail:"",homeDeviceList:this.$store.state.homeDeviceList,pullLoad:!1,loadShow:!1,topStatus:"",fastNodesList:this.$store.state.fastNodesList,startTime:0,isSideslip:!1,groupDefaultName:"群组"}},created:function(){var e=this;window.createGroupCallback=function(t){e.createGroupCallback(t)}},methods:l()({},Object(r.c)({setNum:"SET_NUM"}),{getGroupDes:function(e){return u.a._isEmpty(e)?"":e+"  "},rightDelete:function(e,t){var s=this;return[{content:"删除",stop:!1,style:{background:"red",color:"#fff",padding:"0 15px"},handler:function(){s.delDevice(e,t)}}]},delDevice:function(e,t){var s=this,o={},n={};n.address=e.address,console.log("FBY 删除群组本地数据： "+a()(n)),EspBleMesh.removeGroup(a()(n)),e.models.forEach(function(t){o[m.a.KEY_OP_CODE]=m.a.CONFIG_MODEL_SUBSCRIPTION_DELETE,o[m.a.KEY_DST_ADDRESS]=t.nodeAddress,o[m.a.KEY_ELEMENT_ADDRESS]=t.elementAddress,o[m.a.KEY_GROUP_ADDRESS]=e.address,u.a.sendMeshMessage(s,o)}),s.homedeviceGroup.splice(t,1),s.$store.commit("setDeviceGroupList",s.homedeviceGroup)},sideslip:function(e,t){"start"===e?this.isSideslip=!1:"move"===e?this.isSideslip=!0:"end"===e&&this.isSideslip},loadTop:function(){console.log("下拉刷新");var e=this;e.pullLoad=!0,setTimeout(function(){e.loadShow?(e.pullLoad=!1,e.$refs.loadmore.onTopLoaded()):(e.loadShow=!0,EspBleMesh.getMeshNetwork())},50),setTimeout(function(){e.loadShow=!1,e.pullLoad=!1,e.$refs.loadmore.onTopLoaded()},3e3)},onBackPressed:function(){Object(d.Toast)({message:this.$t("exitProgramDesc"),position:"bottom",duration:2e3}),0===this.startTime?this.startTime=(new Date).getTime():(new Date).getTime()-this.startTime<2e3?EspBleMesh.finish():this.startTime=(new Date).getTime()},handleTopChange:function(e){this.topStatus=e;var t=document.getElementsByClassName("mint-loadmore-content");console.log("FBY arr"+a()(t)),this.pullLoad?(t[0].classList.add("pullLoad"),this.topStatus="loading",this.$refs.loadmore.topStatus="loading"):t[0].classList.remove("pullLoad")},getSkillsAllList:function(e){return 0===e?(console.log("getSkillsAllList: "+a()(this.homedeviceGroup)),this.homedeviceGroup):this.skillsGroupOne},showBlueFail:function(){console.log("点击蓝牙图标")},scanCallback:function(e){u.a.scanCallback(e,this)},connectCallback:function(e){u.a.connectCallback(e,this,!0)},showUl:function(){var e=this;console.log("添加群组");var t='<p id="p"><input class="new-group-name" id="r" value="'+e.groupDefaultName+'" placeholder="'+e.$t("groupname")+'"></p>';Object(d.MessageBox)({$type:"confirm",title:e.$t("newgroup"),inputPlaceholder:e.$t("groupdetail"),message:t,showCancelButton:!0,showInput:!0}).then(function(e){var t=e.value,s=e.action;console.log("名称："+document.getElementById("r").value+"描述："+t+"action"+s);var o={name:document.getElementById("r").value,description:t};console.log("FBY skills createGroupData: "+a()(o)),EspBleMesh.createGroup(a()(o)),document.getElementById("r").value="群组"}).catch(function(e){document.getElementById("r").value="群组"}),setTimeout(function(){document.getElementById("r").addEventListener("blur",e.animateWidthBlur,!1),document.getElementById("r").addEventListener("focus",e.animateWidthFocus,!1)},1e3)},animateWidthBlur:function(){console.log("blur"),this.$store.commit("setIsNavFooterShow",!0)},animateWidthFocus:function(){console.log("focus"),this.$store.commit("setIsNavFooterShow",!1)},showColor:function(e){console.log("cell 点击"),this.isBleConnect=this.$store.state.isBleConnect,this.isBleConnect?(this.$store.commit("setGroupInfo",e),this.$router.togo({name:"groupsOperation",query:e})):u.a.messageRemind(this.$t("devicebleconnecting"))},isLight:function(e){return u.a.isLight(e)},homeDeviceScan:function(){u.a.homeDeviceScan(this)},scanTimeout:function(){u.a.scanTimeout(this)&&u.a.messageRemind(this.$t("unconnectable"))},close:function(e,t){var s=this,o={};o[m.a.KEY_OP_CODE]=m.a.GENERIC_ON_OFF_SET_UNACKNOWLEDGED,o[m.a.KEY_DST_ADDRESS]=e.address,o[m.a.KEY_STATE]=t,s.isBleConnect=s.$store.state.isBleConnect,s.isBleConnect?u.a.sendMeshMessage(s,o):(u.a.messageRemind(s.$t("trybleconnect")),s.homeDeviceScan()),console.log("FBY homedeviceGroup 1111"+a()(s.homedeviceGroup)),s.homedeviceGroup.forEach(function(o,n){o.address===e.address&&(console.log("FBY address"+o.address),o.isOnOff=t,s.homedeviceGroup.splice(n,1,o),s.$store.commit("setDeviceGroupList",s.homedeviceGroup))}),console.log("FBY homedeviceGroup 1111"+a()(s.homedeviceGroup)),s.homedeviceGroup.forEach(function(e){e.models.forEach(function(e){u.a.updateNodesStatus(s,e.nodeAdress,t,"status")})})},getGroups:function(){console.log("groups 页面获取群组信息"),EspBleMesh.getGroups()},createGroupCallback:function(e){e=u.a.base64().decode(e),console.log("FBY connectCallback"+e),e=JSON.parse(e),u.a._isEmpty(e)||u.a._isEmpty(e.address)||(this.$store.commit("setGroupInfo",e),this.$store.state.isBleConnect?this.$router.togo({name:"addDevices",query:e}):(u.a.messageRemind(this.$t("trybleconnect")),this.homeDeviceScan()))},sendBLEMeshData:function(){u.a.sendBLEMeshData(this)},sendMeshMessage:function(e){u.a.sendMeshMessage(this,e)},getMeshNetworkCallback:function(e){u.a.getMeshNetworkCallback(e,this)},getMeshGroupData:function(e,t){console.log("FBY skills getMeshGroupData:"+a()(e));e=u.a.setMeshGroupsData(e,t,this),u.a._isEmpty(e)?this.homedeviceGroup=this.$store.state.deviceGroupList:this.homedeviceGroup=e,console.log("FBY skills homedeviceGroup:"+a()(this.homedeviceGroup))},meshMessageCallback:function(e){u.a.meshMessageCallback(e,this,"skills")},configModelSubscriptionCallback:function(e){console("FBY groups configModelSubscriptionCallback: "+a()(e))},getFastProvNodeAddrCallback:function(e){this.fastNodesList=u.a.fastNodesStatus(this,e)}}),mounted:function(){},activated:function(){var e=this;window.scanCallback=function(t){e.scanCallback(t)},window.connectCallback=function(t){e.connectCallback(t)},window.getMeshNetworkCallback=function(t){e.getMeshNetworkCallback(t)},window.meshMessageCallback=function(t){e.meshMessageCallback(t)},window.onBackPressed=function(){e.onBackPressed()},e.connectContent=0,e.startTime=0,e.isBleConnect=e.$store.state.isBleConnect,setTimeout(function(){e.homedeviceGroup=e.$store.state.deviceGroupList;var t=!0,s=!1,o=void 0;try{for(var i,a=n()(e.homedeviceGroup);!(t=(i=a.next()).done);t=!0){var c=i.value,l=!0,r=!1,d=void 0;try{for(var h,m=n()(c.models);!(l=(h=m.next()).done);l=!0){h.value.status&&u.a.updateGroupsStatus(e,c.address,!0,"isOnOff")}}catch(e){r=!0,d=e}finally{try{!l&&m.return&&m.return()}finally{if(r)throw d}}}}catch(e){s=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(s)throw o}}},3e3),e.selectList=[e.$t("groupscontrol")],e.skillsGroupOne=[{name:"客厅灯",address:10,description:"客厅顶灯 + 落地灯",models:[{elementAddress:2,modelId:4096,name:"My Node -- Generic On Off Server"},{elementAddress:3,modelId:4096,name:"My Node -- Generic On Off Server"}]},{name:"客厅灯",address:10,description:"客厅顶灯 + 落地灯",models:[{elementAddress:2,modelId:4096,name:"My Node -- Generic On Off Server"}]},{name:"客厅灯",address:10,description:"客厅顶灯 + 落地灯",models:[{elementAddress:2,modelId:4096,name:"My Node -- Generic On Off Server"},{elementAddress:3,modelId:4096,name:"My Node -- Generic On Off Server"}]},{name:"客厅灯",address:10,description:"客厅顶灯 + 落地灯",models:[{elementAddress:2,modelId:4096,name:"My Node -- Generic On Off Server"}]}]},computed:l()({},Object(r.b)(["number"]),Object(r.d)({number:function(e){return e.home.number}}),{getBlueEnable:function(){return this.blueEnable=this.$store.state.blueInfo,this.locationGranted=this.$store.state.locationGranted,this.locationEnabled=this.$store.state.locationEnabled,console.log("状态实时更新 blueEnable:"+this.blueEnable+"  locationGranted:"+this.locationGranted+"  locationEnabled:"+this.locationEnabled),this.blueEnable}})}),f={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"index-content-box"},[o("div",{staticClass:"home-header"},[o("img",{staticClass:"esp-logo",attrs:{src:s("Cotv")}}),e._v(" "),o("p",{staticClass:"home-network"},[e._v("Espressif Network")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.getBlueEnable,expression:"!getBlueEnable"}],staticClass:"bluetooth-base",on:{click:e.showBlueFail}},[o("i",{staticClass:"icon-bluetooth bluetooth-style"})]),e._v(" "),o("i",{staticClass:"icon-plus right-more",on:{click:function(t){return t.stopPropagation(),e.showUl(t)}}})]),e._v(" "),o("div",{staticClass:"select-menu-base"},[o("div",{staticClass:"select-menu"},[o("mt-navbar",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.selectList,function(t,s){return o("mt-tab-item",{key:t,attrs:{id:s}},[e._v(e._s(t))])}),1)],1)]),e._v(" "),o("div",{staticClass:"content-info scan-device flex-wrapper search-device"},[o("div",{staticClass:"overflow-touch"},[o("mt-loadmore",{ref:"loadmore",attrs:{"top-method":e.loadTop},on:{"top-status-change":e.handleTopChange}},[e._l(e.homedeviceGroup,function(t,s){return o("div",{key:t.group,staticClass:"item push-none",on:{click:function(s){return s.target!==s.currentTarget?null:e.showColor(t)}}},[o("mt-cell-swipe",{attrs:{right:e.rightDelete(t,s)},nativeOn:{touchstart:function(s){return e.sideslip("start",t)},touchmove:function(s){return e.sideslip("move",t)},touchend:function(s){return e.sideslip("end",t)}}},[o("div",{staticClass:"item-icon-circle",on:{click:function(s){return s.stopPropagation(),e.showColor(t)}}},[o("i",{staticClass:"icon-groups"}),e._v(" "),o("span",[e._v(e._s(t.models.length))])]),e._v(" "),o("div",{staticClass:"item-name",on:{click:function(s){return s.stopPropagation(),e.showColor(t)}}},[o("span",[e._v(e._s(t.name))]),e._v(" "),o("span",{staticClass:"desc"},[e._v(e._s(e.getGroupDes(t.description))+e._s(t.address.toString(16)))])]),e._v(" "),o("div",{staticClass:"item-power"},[o("div",{staticClass:"switch-wrapper"},[o("span",{class:{active:!t.isOnOff},on:{click:function(s){return e.close(t,!1)}}},[e._v("OFF")]),e._v(" "),o("span",{class:{active:t.isOnOff},on:{click:function(s){return e.close(t,!0)}}},[e._v("ON")])])])])],1)}),e._v(" "),o("div",{staticClass:"mint-loadmore-top",attrs:{slot:"top"},slot:"top"},[o("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==e.topStatus,expression:"topStatus !== 'loading'"}],class:{rotate:"drop"===e.topStatus}},[e._v("↓")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"loading"===e.topStatus,expression:"topStatus === 'loading'"}],attrs:{id:"loader-wrapper-small"}},[o("div",{staticClass:"loader loader-small"}),e._v(" "),o("div",{staticClass:"loader-section section-left"}),e._v(" "),o("div",{staticClass:"loader-section section-right"})])])],2)],1)])])},staticRenderFns:[]};var v=s("VU/8")(p,f,!1,function(e){s("nV9l")},"data-v-29426186",null);t.default=v.exports},"3fs2":function(e,t,s){var o=s("RY/4"),n=s("dSzd")("iterator"),i=s("/bQp");e.exports=s("FeBl").getIteratorMethod=function(e){if(void 0!=e)return e[n]||e["@@iterator"]||i[o(e)]}},"4mcu":function(e,t){e.exports=function(){}},"880/":function(e,t,s){e.exports=s("hJx8")},"8EpJ":function(e,t){},"94VQ":function(e,t,s){"use strict";var o=s("Yobk"),n=s("X8DO"),i=s("e6n0"),a={};s("hJx8")(a,s("dSzd")("iterator"),function(){return this}),e.exports=function(e,t,s){e.prototype=o(a,{next:n(1,s)}),i(e,t+" Iterator")}},BO1k:function(e,t,s){e.exports={default:s("fxRn"),__esModule:!0}},EGZi:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},PzxK:function(e,t,s){var o=s("D2L2"),n=s("sB3e"),i=s("ax3d")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),o(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},RPLV:function(e,t,s){var o=s("7KvD").document;e.exports=o&&o.documentElement},"RY/4":function(e,t,s){var o=s("R9M2"),n=s("dSzd")("toStringTag"),i="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,s,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(s=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),n))?s:i?o(t):"Object"==(a=o(t))&&"function"==typeof t.callee?"Arguments":a}},Yobk:function(e,t,s){var o=s("77Pl"),n=s("qio6"),i=s("xnc9"),a=s("ax3d")("IE_PROTO"),c=function(){},l=function(){var e,t=s("ON07")("iframe"),o=i.length;for(t.style.display="none",s("RPLV").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;o--;)delete l.prototype[i[o]];return l()};e.exports=Object.create||function(e,t){var s;return null!==e?(c.prototype=o(e),s=new c,c.prototype=null,s[a]=e):s=l(),void 0===t?s:n(s,t)}},dSzd:function(e,t,s){var o=s("e8AB")("wks"),n=s("3Eo+"),i=s("7KvD").Symbol,a="function"==typeof i;(e.exports=function(e){return o[e]||(o[e]=a&&i[e]||(a?i:n)("Symbol."+e))}).store=o},e6n0:function(e,t,s){var o=s("evD5").f,n=s("D2L2"),i=s("dSzd")("toStringTag");e.exports=function(e,t,s){e&&!n(e=s?e:e.prototype,i)&&o(e,i,{configurable:!0,value:t})}},fxRn:function(e,t,s){s("+tPU"),s("zQR9"),e.exports=s("g8Ux")},g8Ux:function(e,t,s){var o=s("77Pl"),n=s("3fs2");e.exports=s("FeBl").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return o(t.call(e))}},gpVb:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("mvHQ"),n=s.n(o),i=s("Dd8w"),a=s.n(i),c=s("NYxO"),l=s("Y54T"),r=s("yojn"),u=s.n(r),d=s("Au9i"),h={data:function(){return{homeDeviceList:this.$store.state.homeDeviceList,fastNodesList:this.$store.state.fastNodesList,selected:this.$store.state.homeMenu,blueEnable:!0,locationGranted:!0,locationEnabled:!0,flag:!1,onoff:!1,isSwitchUI:!1,isSwitchOnOff:!1,selectList:this.$store.state.homeSelectList,proxyAddress:"",connectContent:0,connectData:"",isBleConnect:!1,homedeviceGroup:this.$store.state.deviceGroupList,pullLoad:!1,loadShow:!1,topStatus:"",startTime:0,isGetDetailData:!1,groupsList:[],groupsDetail:{},homeNewDevice:[]}},beforeDestroy:function(){console.log("即将离开 Home 页面")},watch:{$route:"getPath"},created:function(){var e=this;window.getMeshNetworkCallback=function(t){e.getMeshNetworkCallback(t)},window.scanCallback=function(t){e.scanCallback(t)},window.connectCallback=function(t){e.connectCallback(t)},window.meshMessageCallback=function(t){e.meshMessageCallback(t)},window.onBackPressed=function(){e.onBackPressed()},window.getMeshInfoCallback=function(t){e.getMeshInfoCallback(t)},window.getGroupsCallback=function(t){e.getGroupsCallback(t)}},methods:a()({},Object(c.c)({setNum:"SET_NUM"}),{getGroupsCallback:function(e){e=l.a.base64().decode(e),console.log("FBY getGroupsCallback"+e),e=JSON.parse(e),l.a._isEmpty(e)||(this.groupsList=e,this.selectList.length>2&&this.selectList.splice(2,this.selectList.length-2),this.$store.commit("setHomeSelectList",this.selectList))},getMeshInfoCallback:function(e){e=l.a.base64().decode(e),console.log("FBY getMeshInfoCallback"+e),e=JSON.parse(e),l.a._isEmpty(e)||(homedeviceGroup,"node"===e.type&&0===this.selected?(this.homeDeviceList=e.nodes,this.$store.commit("setHomeDeviceList",this.homeDeviceList)):"fastNode"===e.type&&1===this.selected?this.fastNodesList=e.fastNodes:"group"===e.type&&this.groupsList[this.selected].address===e.address&&(this.groupsDetail[this.selected]=e)),this.isBleConnect=this.$store.state.isBleConnect,this.isBleConnect?this.sendBLEMeshData():this.homeDeviceScan(this),console.log("getMeshInfoCallback getHomeAllList 1"),this.getHomeAllList(this.selected),console.log("getMeshInfoCallback getHomeAllList 2")},testClick:function(){},onBackPressed:function(){Object(d.Toast)({message:this.$t("exitProgramDesc"),position:"bottom",duration:2e3}),0===this.startTime?this.startTime=(new Date).getTime():(new Date).getTime()-this.startTime<2e3?EspBleMesh.finish():this.startTime=(new Date).getTime()},loadTop:function(){console.log("下拉刷新");var e=this,t={};e.isGetDetailData=!0,e.pullLoad=!0,setTimeout(function(){e.loadShow?(e.pullLoad=!1,e.$refs.loadmore.onTopLoaded()):(e.loadShow=!0,0===e.selected?t.type="node":1===e.selected?t.type="fastNode":(t.type="group",t.address=e.groupsList[e.selected].address),EspBleMesh.getMeshNetwork())},50),setTimeout(function(){e.loadShow=!1,e.pullLoad=!1,e.isGetDetailData=!1,e.$refs.loadmore.onTopLoaded()},5e3)},handleTopChange:function(e){this.topStatus=e;var t=document.getElementsByClassName("mint-loadmore-content");console.log("FBY arr"+n()(t)),this.pullLoad?(t[0].classList.add("pullLoad"),this.topStatus="loading",this.$refs.loadmore.topStatus="loading"):t[0].classList.remove("pullLoad")},getPath:function(){console.log("路由发生变化"+this.$route.path),"/home"===this.$route.path||EspBleMesh.stopScan()},scanCallback:function(e){l.a.scanCallback(e,this)},connectCallback:function(e){l.a.connectCallback(e,this,this.isGetDetailData)},showBlueFail:function(){console.log("点击蓝牙图标")},showUl:function(){this.flag=!this.flag},getHomeAllList:function(e){return this.$store.commit("setHomeMenu",e),console.log("Home 菜单栏选择："+e),0===e?(console.log("FBY Home homeDeviceList: "+n()(this.homeDeviceList)),this.homeDeviceList):1===e?this.fastNodesList:(console.log("FBY Home homedeviceGroup selected: "+e),console.log("FBY Home homedeviceGroup address: "+n()(this.homedeviceGroup)),l.a._isEmpty(this.homedeviceGroup[e-2])?[]:this.homedeviceGroup[e-2].models)},homeMenu:function(e){console.log("点击配网"+e),this.flag=!1,"1"===e?(EspBleMesh.stopScan(),this.isBleConnect=this.$store.state.isBleConnect,this.isBleConnect&&l.a.proxyDisconnect(this),this.$router.togo({name:"sigprovision",query:{type:e}})):"2"===e?(this.isBleConnect=this.$store.state.isBleConnect,this.isBleConnect?(EspBleMesh.stopScan(),this.$router.togo({name:"firstprovision",query:{type:e}})):l.a.messageRemind(this.$t("fastremind"))):console.log("新建网络")},operateItem:function(e,t){console.log("点击 cell 控制设备"+n()(e));this.flag=!1,this.pullLoad||(this.isBleConnect=this.$store.state.isBleConnect,this.isBleConnect?this.pushNextPage(e):(EspBleMesh.stopScan(),l.a.messageRemind(this.$t("bleConnecting")),this.$store.commit("setBleWillConnectAddress",e.address),this.homeDeviceScan()))},pushNextPage:function(e){var t=!0,s="";EspBleMesh.stopScan(),this.$store.commit("setDeviceInfo",e),this.selected>1&&(s=this.homedeviceGroup[this.selected-2].address,t=!1),this.$router.togo({name:"operation",query:{item:e,isNode:t,groupAddress:s,menuSelect:this.selected}})},switchUI:function(){console.log("点击切换 UI"),this.isSwitchUI=!this.isSwitchUI},getIcon:function(e){return l.a.getIconUtil(e)},getBxColor:function(e){return e.address===this.$store.state.bleConnectAddress?"bx-red":""},getColor:function(e){return l.a.getColorUtil(e)},isLight:function(e){return l.a.isLight(e)},switchItem:function(e){this.isBleConnect=this.$store.state.isBleConnect,this.isBleConnect?this.close(e,!e.status):l.a.messageRemind(this.$t("devicebleconnecting"))},homeDeviceScan:function(){l.a.homeDeviceScan(this)},scanTimeout:function(){l.a.scanTimeout(this)&&l.a.messageRemind(this.$t("unconnectable"))},close:function(e,t){var s={},o="";console.log("FBY close device: "+n()(e)+" status: "+t),s[u.a.KEY_OP_CODE]=u.a.GENERIC_ON_OFF_SET_UNACKNOWLEDGED,this.selected>1?(s[u.a.KEY_DST_ADDRESS]=e.elementAddress,s[u.a.KEY_NODE_ADDRESS]=e.nodeAddress):(s[u.a.KEY_DST_ADDRESS]=e.address,s[u.a.KEY_NODE_ADDRESS]=e.address),s[u.a.KEY_STATE]=t,this.isBleConnect=this.$store.state.isBleConnect,this.isBleConnect?l.a.sendMeshMessage(this,s):(l.a.messageRemind(this.$t("trybleconnect")),this.homeDeviceScan()),o=this.selected>1?e.nodeAddress:e.address,l.a.updateNodesStatus(this,o,t,"status")},sendBLEMeshData:function(){l.a.sendBLEMeshData(this)},sendMeshMessage:function(e){l.a.sendMeshMessage(this,e)},getMeshNetworkCallback:function(e){l.a.getMeshNetworkCallback(e,this)},getMeshGroupData:function(e,t){var s=this;console.log("getMeshGroupData : "+n()(s.selectList)),s.selectList.length>2&&s.selectList.splice(2,s.selectList.length-2),console.log("FBY Home getMeshGroupData:"+n()(e)+"     selectList: "+n()(s.selectList)),e=l.a.setMeshGroupsData(e,t,s),s.homedeviceGroup=e,s.homedeviceGroup.forEach(function(e){s.selectList.push(e.name)}),console.log("FBY Home getMeshGroupData selectList: "+n()(s.selectList)),s.$store.commit("setHomeSelectList",s.selectList),console.log("FBY Home getMeshGroupData newGroups:"+n()(e))},meshMessageCallback:function(e){l.a.meshMessageCallback(e,this,"home")},getFastProvNodeAddrCallback:function(e){this.fastNodesList=l.a.fastNodesStatus(this,e),console.log("FBY getFastProvNodeAddrCallback fastNodesList: "+n()(this.fastNodesList))}}),mounted:function(){console.log("mounted 走了")},activated:function(){var e=this;console.log("activated 走了: "+n()(e.selectList)),e.selectList.length>1?(e.selectList.splice(0,1,e.$t("networknodes")),e.selectList.splice(1,1,e.$t("fastnodes"))):(e.selectList.push(e.$t("networknodes")),e.selectList.push(e.$t("fastnodes"))),window.getMeshNetworkCallback=function(t){e.getMeshNetworkCallback(t)},window.scanCallback=function(t){e.scanCallback(t)},window.connectCallback=function(t){e.connectCallback(t)},window.meshMessageCallback=function(t){e.meshMessageCallback(t)},window.onBackPressed=function(){e.onBackPressed()},e.isBleConnect=e.$store.state.isBleConnect,e.fastNodesList=e.$store.state.fastNodesList,e.connectContent=0,e.startTime=0,console.log("capabilities 返回传参打印"+n()(this.$route.query)),e.$route.query.type===u.a.CAPABILITIES&&(l.a._isEmpty(this.$route.query.node)||(e.homeDeviceList.push(this.$route.query.node),e.$store.commit("setHomeDeviceList",e.homeDeviceList),console.log("homeDeviceList 打印"+n()(e.homeDeviceList))))},deactivated:function(){console.log("deactivated 走了"),EspBleMesh.stopScan()},computed:a()({},Object(c.b)(["number"]),Object(c.d)({number:function(e){return e.home.number}}),{getBlueEnable:function(){return this.blueEnable=this.$store.state.blueInfo,this.locationGranted=this.$store.state.locationGranted,this.locationEnabled=this.$store.state.locationEnabled,console.log("状态实时更新 blueEnable:"+this.blueEnable+"  locationGranted:"+this.locationGranted+"  locationEnabled:"+this.locationEnabled),this.blueEnable},getDataList:function(){return this.homeDeviceList=this.$store.state.homeDeviceList,console.log("computed: "+n()(this.homeDeviceList)),this.getHomeAllList(this.selected)}})},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"index-content-box"},[o("div",{staticClass:"home-header"},[o("img",{staticClass:"esp-logo",attrs:{src:s("Cotv")},on:{click:function(t){return e.testClick()}}}),e._v(" "),o("p",{staticClass:"home-network"},[e._v("Espressif Network")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.getBlueEnable,expression:"!getBlueEnable"}],staticClass:"bluetooth-base",on:{click:e.showBlueFail}},[o("i",{staticClass:"icon-bluetooth bluetooth-style"})]),e._v(" "),o("i",{staticClass:"icon-plus right-more",on:{click:function(t){return t.stopPropagation(),e.showUl()}}}),e._v(" "),o("ul",{directives:[{name:"show",rawName:"v-show",value:e.flag,expression:"flag"}],staticClass:"add-ul"},[o("li",{on:{click:function(t){return t.stopPropagation(),e.homeMenu("1")}}},[o("span",[e._v(e._s(e.$t("sigprovision")))])]),e._v(" "),o("li",{on:{click:function(t){return t.stopPropagation(),e.homeMenu("2")}}},[o("span",[e._v(e._s(e.$t("fastprovision")))])])])]),e._v(" "),o("div",{staticClass:"select-menu-base"},[o("div",{staticClass:"select-menu"},[o("mt-navbar",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.selectList,function(t,s){return o("mt-tab-item",{key:s,attrs:{id:s}},[e._v(e._s(t))])}),1)],1),e._v(" "),o("i",{staticClass:"icon-more home-switch-btn flex flex-ac flex-jcc",on:{click:function(t){return t.stopPropagation(),e.switchUI(t)}}})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isSwitchUI,expression:"!isSwitchUI"}],staticClass:"content-info scan-device flex-wrapper search-device"},[o("div",{staticClass:"overflow-touch"},[o("mt-loadmore",{ref:"loadmore",attrs:{"top-method":e.loadTop},on:{"top-status-change":e.handleTopChange}},[e._l(e.getDataList,function(t,s){return o("div",{key:s,staticClass:"item push-none",on:{click:function(s){return s.target!==s.currentTarget?null:e.operateItem(t)}}},[o("div",{staticClass:"item-icon-circle",class:e.getBxColor(t),on:{click:function(s){return s.stopPropagation(),e.operateItem(t)}}},[o("i",{class:e.getIcon(t.tid),style:{color:e.getColor(t)}})]),e._v(" "),o("div",{staticClass:"item-name",on:{click:function(s){return s.stopPropagation(),e.operateItem(t)}}},[o("span",[e._v(e._s(t.name))]),e._v(" "),o("span",{staticClass:"desc"},[e._v(e._s(e.$t("nodeAddresss"))+e._s(t.address)+"    "+e._s(e.$t("nodeVersion"))+e._s(t.version))])]),e._v(" "),o("div",{staticClass:"item-power"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isLight(t.tid)&&e.isBleConnect,expression:"isLight(item.tid) && isBleConnect"}],staticClass:"switch-wrapper"},[o("span",{class:{active:!t.status},on:{click:function(s){return e.close(t,!1)}}},[e._v("OFF")]),e._v(" "),o("span",{class:{active:t.status},on:{click:function(s){return e.close(t,!0)}}},[e._v("ON")])])])])}),e._v(" "),o("div",{staticClass:"mint-loadmore-top",attrs:{slot:"top"},slot:"top"},[o("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==e.topStatus,expression:"topStatus !== 'loading'"}],class:{rotate:"drop"===e.topStatus}},[e._v("↓")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"loading"===e.topStatus,expression:"topStatus === 'loading'"}],attrs:{id:"loader-wrapper-small"}},[o("div",{staticClass:"loader loader-small"}),e._v(" "),o("div",{staticClass:"loader-section section-left"}),e._v(" "),o("div",{staticClass:"loader-section section-right"})])])],2)],1)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isSwitchUI,expression:"isSwitchUI"}],staticClass:"home-switch-base"},[o("div",{staticClass:"switch-base"},e._l(e.getHomeAllList(e.selected),function(t){return o("div",{key:t.address,staticClass:"switch-item",on:{click:function(s){return s.target!==s.currentTarget?null:e.switchItem(t)}}},[o("div",{staticClass:"switch-item-content",on:{click:function(s){return s.stopPropagation(),e.switchItem(t)}}},[o("i",{staticClass:"icon-light switch-icon-light",class:{switch:t.status}}),e._v(" "),o("span",{class:{"node-name":e.selected>1}},[e._v(e._s(t.name))])])])}),0)])])},staticRenderFns:[]};var p=s("VU/8")(h,m,!1,function(e){s("8EpJ")},null,null);t.default=p.exports},h65t:function(e,t,s){var o=s("UuGF"),n=s("52gC");e.exports=function(e){return function(t,s){var i,a,c=String(n(t)),l=o(s),r=c.length;return l<0||l>=r?e?"":void 0:(i=c.charCodeAt(l))<55296||i>56319||l+1===r||(a=c.charCodeAt(l+1))<56320||a>57343?e?c.charAt(l):i:e?c.slice(l,l+2):a-56320+(i-55296<<10)+65536}}},nV9l:function(e,t){},qio6:function(e,t,s){var o=s("evD5"),n=s("77Pl"),i=s("lktj");e.exports=s("+E39")?Object.defineProperties:function(e,t){n(e);for(var s,a=i(t),c=a.length,l=0;c>l;)o.f(e,s=a[l++],t[s]);return e}},"vIB/":function(e,t,s){"use strict";var o=s("O4g8"),n=s("kM2E"),i=s("880/"),a=s("hJx8"),c=s("/bQp"),l=s("94VQ"),r=s("e6n0"),u=s("PzxK"),d=s("dSzd")("iterator"),h=!([].keys&&"next"in[].keys()),m=function(){return this};e.exports=function(e,t,s,p,f,v,g){l(s,t,p);var C,b,w,L=function(e){if(!h&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new s(this,e)}}return function(){return new s(this,e)}},k=t+" Iterator",S="values"==f,_=!1,E=e.prototype,D=E[d]||E["@@iterator"]||f&&E[f],B=D||L(f),y=f?S?L("entries"):B:void 0,G="Array"==t&&E.entries||D;if(G&&(w=u(G.call(new e)))!==Object.prototype&&w.next&&(r(w,k,!0),o||"function"==typeof w[d]||a(w,d,m)),S&&D&&"values"!==D.name&&(_=!0,B=function(){return D.call(this)}),o&&!g||!h&&!_&&E[d]||a(E,d,B),c[t]=B,c[k]=m,f)if(C={values:S?B:L("values"),keys:v?B:L("keys"),entries:y},g)for(b in C)b in E||i(E,b,C[b]);else n(n.P+n.F*(h||_),t,C);return C}},xGkn:function(e,t,s){"use strict";var o=s("4mcu"),n=s("EGZi"),i=s("/bQp"),a=s("TcQ7");e.exports=s("vIB/")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,s=this._i++;return!e||s>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?s:"values"==t?e[s]:[s,e[s]])},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},zQR9:function(e,t,s){"use strict";var o=s("h65t")(!0);s("vIB/")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,s=this._i;return s>=t.length?{value:void 0,done:!0}:(e=o(t,s),this._i+=e.length,{value:e,done:!1})})}});
//# sourceMappingURL=2.a89d8bbda2d85b84b2d6.js.map